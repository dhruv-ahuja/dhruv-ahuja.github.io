<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://dhruvahuja.me name=base><title>
            
                Creating an AI-Powered Document Translation Workflow
            
        </title><meta content="Creating an AI-Powered Document Translation Workflow" property=og:title><meta content="Outlining the translation workflow of my app, which crawls web content, translates it and prepares it for consumption through a web-based Markdown Viewer." property=og:description><meta content="Outlining the translation workflow of my app, which crawls web content, translates it and prepares it for consumption through a web-based Markdown Viewer." name=description><link href=https://dhruvahuja.me/icon/favicon.png rel=icon type=image/png><link href=https://dhruvahuja.me/fonts.css rel=stylesheet><link media="(prefers-color-scheme: dark)" href=/syntax-theme-dark.css rel=stylesheet><link media="(prefers-color-scheme: light)" href=/syntax-theme-light.css rel=stylesheet><script async data-goatcounter=https://dhruv-ahuja.goatcounter.com/count src=https://dhruvahuja.me/js/count.js></script><noscript><img src="https://dhruv-ahuja.goatcounter.com//count?p=/posts/ai-translation-workflow/&t=Creating an AI-Powered Document Translation Workflow"></noscript><script defer src=https://dhruvahuja.me/js/codeblock.js></script><script defer src=https://dhruvahuja.me/js/toc.js></script><script src=https://dhruvahuja.me/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="
    Dhruv Ahuja
" href=https://dhruvahuja.me/atom.xml rel=alternate type=application/atom+xml><link href=https://dhruvahuja.me/theme/light.css rel=stylesheet><link href=https://dhruvahuja.me/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://dhruvahuja.me/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://dhruvahuja.me/main.css media=screen rel=stylesheet><link href=https://dhruvahuja.me/custom.css rel=stylesheet><link href=https://dhruvahuja.me/theme-sunset.css rel=stylesheet><script src="https://dhruvahuja.me/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=left-content></div><div class=content><nav><div class=left-nav><a href=https://dhruvahuja.me>Dhruv Ahuja</a><div class=socials><a class=social href=mailto:dhruvahuja2k@gmail.com rel=noopener target=_blank> <img alt=email src=https://dhruvahuja.me/icons/social/email.svg> </a><a class=social href=https://www.linkedin.com/in/dhruvahuja2k/ rel=noopener target=_blank> <img alt=linkedin src=https://dhruvahuja.me/icons/social/linkedin.svg> </a><a class=social href=https://github.com/dhruv-ahuja/ rel=noopener target=_blank> <img alt=github src=https://dhruvahuja.me/icons/social/github.svg> </a></div></div><div class=right-nav><a href=https://dhruvahuja.me/posts style=margin-right:.5em>/posts</a><a href=https://dhruvahuja.me/projects style=margin-right:.5em>/projects</a><a href=https://dhruvahuja.me/oss style=margin-right:.5em>/oss</a><a href=https://dhruvahuja.me/tags style=margin-right:.5em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://dhruvahuja.me/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://dhruvahuja.me/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://dhruvahuja.me/icons/moon.svg> </a><script>updateItemToggleTheme()</script></div></nav><div data-selector="main article p" class=visible-element-observer-root><main><article><div class=title><div class=page-header>Creating an AI-Powered Document Translation Workflow</div><div class=meta>Posted on <time>2025-04-19</time><span class=tags-label>::</span><span class=tags> <a class=post-tag href=https://dhruvahuja.me/tags/ai/>ai</a> <a class=post-tag href=https://dhruvahuja.me/tags/python/>python</a> <a class=post-tag href=https://dhruvahuja.me/tags/automation/>automation</a> </span></div></div><section class=body><h2 id=introduction>Introduction</h2><p>After a 3-year break from learning Spanish, I decided to find a fun and efficient way to reconnect with the language -- creating an <a href=https://github.com/dhruv-ahuja/py_ai_translator rel=noopener target=_blank>AI document translation app</a> that generates bilingual documents, readable from my Obsidian-inspired Markdown Viewer web app. Both applications run on my VPS, the Markdown Viewer being publicly exposed via Caddy.<h2 id=the-translation-structure>The Translation Structure</h2><p>The following is the output document’s translation structure:<ul><li>Spanish text<li>original English text<li>Spanish text<li>original English text and so on until the end of the text</ul><p>The structure ensures that I am able to maintain a frame of reference to the original tone and language while I am reading the Spanish text. This structure allows the formation of reference points between the flow of the Spanish text versus the English written language, and helps grasp tone and meaning effectively. I’m certain there are better ways to learn the language but this has been quite interesting thus far. While I’m sure this is not the most efficient way to learn the language, I’ve found this approach to be quite engaging. The fact that I’m learning through something I built also gives me motivation.<h2 id=the-translation-workflow>The Translation Workflow</h2><p>The app has Docker images for web API and CLI versions, though I primarily use the CLI version. There are only three inputs:<ul><li><code>url</code> of the webpage to be translated (mandatory),<li><code>name</code> defines the name to save the document by, defaulting to the OpenGraph page title if none is provided, and<li><code>cache</code> defines whether the crawler should use use cached webpage data for the given URL, defaulting to <code>True</code>.</ul><p>The web crawler extracts the webpage content, which the LLM then translates using the above structure, and the resultant document is saved to the output directory. Crawled data and its translation are also persisted in a Postgres database.<p><a href=https://github.com/dhruv-ahuja/py_ai_translator/blob/main/app/utils rel=noopener target=_blank>You can check the core application logic here</a>.<h3 id=web-crawler-configuration>Web Crawler Configuration</h3><p><code>Crawl4AI</code> is my web crawler of choice, it crawls the given URL, prunes the content and returns a clean Markdown result. Although its dependencies increase the Docker image size, the trade-off is acceptable since the crawler runs locally, and instantiates a headless browser session. It also caches previously crawled pages, fetching content instantly for repeated URLs.<p><em>Sample <code>Crawl4AI</code> output</em><pre class="language-bash z-code" data-lang=bash><code class=language-bash data-lang=bash><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[INIT]....</span></span><span class="z-meta z-function-call z-arguments z-shell"> → Crawl4AI 0.5.0.post4</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[FETCH]...</span></span><span class="z-meta z-function-call z-arguments z-shell"> ↓ https://example.com...</span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Status:</span></span><span class="z-meta z-function-call z-arguments z-shell"> True</span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Time:</span></span><span class="z-meta z-function-call z-arguments z-shell"> 1.22s</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[SCRAPE]..</span></span><span class="z-meta z-function-call z-arguments z-shell"> ◆ https://example.com...</span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Time:</span></span><span class="z-meta z-function-call z-arguments z-shell"> 0.008s</span>
</span><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">[COMPLETE]</span></span><span class="z-meta z-function-call z-arguments z-shell"> ● https://example.com...</span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Status:</span></span><span class="z-meta z-function-call z-arguments z-shell"> True</span> <span class="z-keyword z-operator z-logical z-pipe z-shell">|</span> <span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">Total:</span></span><span class="z-meta z-function-call z-arguments z-shell"> 1.23s</span>
</span></code></pre><h3 id=translating-the-crawled-data>Translating the Crawled Data</h3><p>The choice of <a href=https://openrouter.ai rel=noopener target=_blank>OpenRouter</a> as the LLM provider unlocks access to hundreds of LLM models with a single API key. This allowed for rapid experimentation to find the right model for my needs. I currently use Google’s Gemini 2.0 Flash-Lite for its affordability and speed, while handling effective translation and extraction of relevant content from the crawled text body.<p>It can however, occasionally fail to structure the translated content under headings properly, moving the text body under the English heading instead. This hasn’t bothered me in practice, and I believe this can be corrected with further tweaking of the LLM prompts.<h3 id=brief-on-ai-usage-and-observability>Brief on AI Usage and Observability</h3><p><code>PydanticAI</code> was quick to setup and use with OpenRouter for my straightforward use case, and it is apparently easy to configure for more complex tasks in the future. Integrating <code>Logfire</code> with PydanticAI for agent observability was as easy as passing a boolean parameter to the <code>Agent</code> object instance. Logfire itself requires just a few lines of code and an API key acquired from its web dashboard.<p>Observability data will help keep track of draw comparisons between usage costs of various models, when translating particular documents.<p><em>Token usage and cost for a long, text-only article, observed in Pydantic Logfire</em> <img alt="Token usage and cost for a long, text-only article, observed in Pydantic Logfire" src=/images/ai_translation/logfire.png><h3 id=consuming-the-output>Consuming the Output</h3><p>I trigger the application using Docker as a removable container, using something like<pre class="language-bash z-code" data-lang=bash><code class=language-bash data-lang=bash><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">docker</span></span><span class="z-meta z-function-call z-arguments z-shell"> run<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>env-file</span> .env.deploy<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>network</span> app-network<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>rm</span> dhruvahuja/py_ai_translator_cli<span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> -</span>v</span> <span class="z-meta z-group z-expansion z-tilde"><span class="z-variable z-language z-tilde z-shell">~</span></span>/docker_data/public_markdown:/app/markdown <span class="z-string z-quoted z-single z-shell"><span class="z-punctuation z-definition z-string z-begin z-shell">'</span>https://www.example.com<span class="z-punctuation z-definition z-string z-end z-shell">'</span></span></span>
</span></code></pre><p>The <code>app-network</code> Docker network connects the app to a shared Postgres instance, which stores crawled content, translated outputs, and metadata for future reference. A simple <a href=https://feed.dhruvahuja.me/files rel=noopener target=_blank>Markdown Viewer Node webapp</a> scans the output directory and lists all translated documents along with <code>#public</code> tagged notes, making them accessible via a clean web UI.<p><em>Sample document output in the Markdown Viewer app, where <code>example.md</code> is the translated document</em> <img alt="Sample document output in the Markdown Viewer app, where example.md is the translated document" src=/images/ai_translation/markdown_viewer.png><h2 id=conclusion-ai-for-the-win>Conclusion: AI For the Win</h2><p>I have enjoyed working on the application and the surrounding tooling that I’ve built to accomplish my goals. Having AI services such as v0.dev is a godsend for creating designs and POCs, like the Markdown Viewer that emulates Obsidian’s look-and-feel. AI is enabling us to build at a breath-taking pace, with increased emphasis on the desired outcome rather than the boilerplate and particulars of a language.<p>In this case, I did not have to learn Node syntax to prepare a functional script, while acutely reviewing and understanding the rationale behind the code. I similarly wrote a toy Go app to backup my VPS’ crucial data to S3 with certain conditions, in a couple hours.<p>Finally, I’ll be relearning Spanish through content I enjoy. I am deferring improvements to the code or the features, as it’s time to actually use I’ve built!</section></article></main></div></div><div class=right-content><div class=toc><div class=heading>Table of Contents</div><ul class=toc-list><li class=parent><a href=https://dhruvahuja.me/posts/ai-translation-workflow/#introduction>Introduction</a><li class=parent><a href=https://dhruvahuja.me/posts/ai-translation-workflow/#the-translation-structure>The Translation Structure</a><li class=parent><a href=https://dhruvahuja.me/posts/ai-translation-workflow/#the-translation-workflow>The Translation Workflow</a> <ul><li><a href=https://dhruvahuja.me/posts/ai-translation-workflow/#web-crawler-configuration>Web Crawler Configuration</a><li><a href=https://dhruvahuja.me/posts/ai-translation-workflow/#translating-the-crawled-data>Translating the Crawled Data</a><li><a href=https://dhruvahuja.me/posts/ai-translation-workflow/#brief-on-ai-usage-and-observability>Brief on AI Usage and Observability</a><li><a href=https://dhruvahuja.me/posts/ai-translation-workflow/#consuming-the-output>Consuming the Output</a></ul><li class=parent><a href=https://dhruvahuja.me/posts/ai-translation-workflow/#conclusion-ai-for-the-win>Conclusion: AI For the Win</a></ul></div></div>